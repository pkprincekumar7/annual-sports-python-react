{
  "family": "${NAME_PREFIX}-event-configuration-service",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "512",
  "memory": "1024",
  "executionRoleArn": "${EXECUTION_ROLE_ARN}",
  "taskRoleArn": "${TASK_ROLE_ARN}",
  "containerDefinitions": [
    {
      "name": "event-configuration-service",
      "image": "${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/${NAME_PREFIX}-event-configuration-service:${IMAGE_TAG}",
      "essential": true,
      "portMappings": [
        { "containerPort": 8005, "protocol": "tcp" }
      ],
      "environment": [
        { "name": "APP_ENV", "value": "development" },
        { "name": "LOG_LEVEL", "value": "INFO" },
        { "name": "JWT_EXPIRES_IN", "value": "24h" },
        { "name": "ADMIN_REG_NUMBER", "value": "admin" },
        { "name": "IDENTITY_URL", "value": "http://identity-service.${SERVICE_NAMESPACE}:8001" },
        { "name": "ENROLLMENT_URL", "value": "http://enrollment-service.${SERVICE_NAMESPACE}:8002" },
        { "name": "DEPARTMENT_URL", "value": "http://department-service.${SERVICE_NAMESPACE}:8003" },
        { "name": "SPORTS_PARTICIPATION_URL", "value": "http://sports-participation-service.${SERVICE_NAMESPACE}:8004" },
        { "name": "EVENT_CONFIGURATION_URL", "value": "http://event-configuration-service.${SERVICE_NAMESPACE}:8005" },
        { "name": "SCHEDULING_URL", "value": "http://scheduling-service.${SERVICE_NAMESPACE}:8006" },
        { "name": "SCORING_URL", "value": "http://scoring-service.${SERVICE_NAMESPACE}:8007" },
        { "name": "REPORTING_URL", "value": "http://reporting-service.${SERVICE_NAMESPACE}:8008" },
        { "name": "DATABASE_NAME", "value": "${NAME_PREFIX}-event-config" },
        { "name": "REDIS_URL", "value": "redis://${REDIS_ENDPOINT}:6379/4" }
      ],
      "secrets": [
        { "name": "JWT_SECRET", "valueFrom": "${JWT_SECRET_ARN}" },
        { "name": "MONGODB_URI", "valueFrom": "${MONGO_URI_SECRET_ARN}" }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/${NAME_PREFIX}/event-configuration-service",
          "awslogs-region": "${AWS_REGION}",
          "awslogs-stream-prefix": "ecs"
        }
      }
    }
  ]
}
